---
title: "[í•™ìŠµ] ê¸°ë¡ 2023ë…„ 2ì›” 3ì¼ ëª©ìš”ì¼"
categories:
  - Research_Daily
tags:
  - UnityC#
  - UniRx
toc: true
toc_sticky: true
toc_label: "í•™ìŠµ ê¸°ë¡"
toc_icon: "sticky-note"
---

# ì°¸ê³ ë¬¸í—Œ 1

---

## ì‚¬ì´íŠ¸ 1

- ì¶œì²˜ì‚¬ì´íŠ¸ ğŸ‘‰ [[Unity] Delegate ì§€ì • ì‹œ GC Alloc ë° ì²˜ë¦¬ ì‹œê°„ ê²€ì¦ ê²°ê³¼](https://baba-s.hatenablog.com/entry/2017/08/23/100000){:target="_blank"} **ë§í¬ì— ì ‘ì†** <br> 

ğŸ“Œ **ë¸”ë¡œê·¸** <br>
**ì„¤ëª…** : ì¼ë³¸ì–´ ë¸”ë¡œê·¸<br>
**ë‚´ìš©** : [Unity] Delegate ì§€ì • ì‹œ GC Alloc ë° ì²˜ë¦¬ ì‹œê°„ ê²€ì¦ ê²°ê³¼<br>
{: .notice--info}

- ì¶œì²˜ì‚¬ì´íŠ¸ ğŸ‘‰ [https://softmedia.sakura.ne.jp/advent-calendar/2020/12-12.html/](https://softmedia.sakura.ne.jp/advent-calendar/2020/12-12.html/){:target="_blank"} **ë§í¬ì— ì ‘ì†** <br> 

ğŸ“Œ **ë¸”ë¡œê·¸** <br>
**ì„¤ëª…** : ì¼ë³¸ì–´ ë¸”ë¡œê·¸<br>
**ë‚´ìš©** : "UniTask2"ì™€ í•¨ê»˜ í¸ì•ˆí•œ ìœ ë‹ˆí‹° ë¼ì´í”„ë¥¼ ì¦ê²¨ë³´ì„¸ìš”!<br>
{: .notice--info}

---

## ì‚¬ì´íŠ¸ 2

- ì¶œì²˜ì‚¬ì´íŠ¸ ğŸ‘‰ [https://qiita.com/toRisouP/items/3ced60a755ab297eb463](https://qiita.com/toRisouP/items/3ced60a755ab297eb463){:target="_blank"} **ë§í¬ì— ì ‘ì†** <br> 

ğŸ“Œ **ë¸”ë¡œê·¸** <br>
**ì„¤ëª…** : ì¼ë³¸ì–´ ë¸”ë¡œê·¸<br>
**ë‚´ìš©** : UniRx&UniTaskë€?<br>
{: .notice--info}

## ì‚¬ì´íŠ¸ 3

- ì¶œì²˜ì‚¬ì´íŠ¸ ğŸ‘‰ [https://speakerdeck.com/torisoup/unitask2020?slide=49](https://speakerdeck.com/torisoup/unitask2020?slide=49){:target="_blank"} **ë§í¬ì— ì ‘ì†** <br> 
- ì¶œì²˜ì‚¬ì´íŠ¸ ğŸ‘‰ [https://qiita.com/toRisouP/items/8f66fd952eaffeaf3107](https://qiita.com/toRisouP/items/8f66fd952eaffeaf3107){:target="_blank"} **ë§í¬ì— ì ‘ì†** <br> 

ğŸ“Œ **ë¸”ë¡œê·¸** <br>
**ì„¤ëª…** : ì¼ë³¸ì–´ íŒŒì›Œí¬ì¸íŠ¸ ëª¨ìŒ ì‚¬ì´íŠ¸<br>
**ë‚´ìš©** : UniTask ì‚¬ìš©ë²• 2020 / UniTask2020 ë‚´ìš©ì´ ì¢‹ë‹¤.<br>
{: .notice--info}

```cs
private readonly CancellationTokenSource _cts = new CancellationTokenSource();
private readonly UniTaskCompletionSource _utc = new UniTaskCompletionSource();
private readonly UniTaskCompletionSource<int> _utcInt = new UniTaskCompletionSource<int>();

public UniTask InitializedAsync => _utc.Task;
private CancellationToken _ct;
UnityAction _action;

private string _f;

private void Awake()
{
    _ct = _cts.Token;

    _action = UniTask.UnityAction(async () => {
        //await UniTask.Yield();
        var uris = new[]
        {
            "https://www.google.com/",
            "https://unity.com/ja",
            "https://github.com/"
        };

        await FetchUriAsyncEnumerable(uris) //IUniTaskAsyncEnumerable
        .Select((_, x) => x)
        //.Take(3) ìµœëŒ€ 5íšŒ ì‹¤í–‰
        .ForEachAsync( _stream =>
        {
            UniTask.RunOnThreadPool(() => { });
            //Debug.Log(_stream)
            Debug.Log(Time.frameCount);
        }, _ct);


        await FetchUriAsyncEnumerable(uris) //IUniTaskAsyncEnumerable
        .ForEachAwaitAsync( async _stream =>
        {
            await UniTask.Delay(System.TimeSpan.FromMilliseconds(100)); //1000ms 1sec
        });

        FetchUriAsyncEnumerable(uris) //IUniTaskAsyncEnumerable
        .Subscribe(async _stream =>
        {
            Debug.Log(_stream.Length);
            await UniTask.Delay(System.TimeSpan.FromMilliseconds(100)); //1000ms 1sec
        });
    });
}

private void Start()
{
    InitializeAsync().Forget();
}

private async UniTaskVoid InitializeAsync()
{
    await UniTask.Yield();

    _utc.TrySetResult();
}

private void OnDestroy()
{
    _utc.TrySetCanceled();
}

private void Skethc00()
{
    UniTask.Void(async x => {
        //var result = await System.IO.File.ReadFil
        var result = $"string result {x}";
        Debug.Log(result);
        await UniTask.Yield();
    }, _f);
}

#region MyRegion
private async UniTaskVoid UniUpdate()
{
    await UniTaskAsyncEnumerable.EveryUpdate()
        .ForEachAsync(_ => {
            Debug.Log(Time.frameCount);
        }, _ct);
}
#endregion

#region UniTaskAsyncEnumerable / await foreach
private IUniTaskAsyncEnumerable<System.IO.Stream> FetchUriAsyncEnumerable(string[] uris)
{
    return uris
        .ToUniTaskAsyncEnumerable()
        .SelectAwait(async x => await FetchAsync(x));
}

private async UniTask<System.IO.Stream> FetchAsync(string uri)
{
    using (var uwr = UnityWebRequest.Get(uri))
    {
        await uwr.SendWebRequest();

        if ((int)uwr.responseCode >= 400)
        {
            Debug.LogErrorFormat("{0} - {1}", uwr.responseCode, uwr.url);
            throw new System.Exception("Response code invalid");
        }

        if (uwr.downloadedBytes > int.MaxValue)
        {
            throw new System.Exception("Stream is larger than can be copied into byte array");
        }

        System.IO.Stream LoadedStream = null;

        bool Success = uwr != null && uwr.isDone && uwr.result == UnityWebRequest.Result.Success;
        if(Success)
        {
            if (uwr.downloadedBytes == 0)
            {
                LoadedStream = new System.IO.MemoryStream(new byte[] { }, 0, 0, true, true);
            }
            else
            {
                LoadedStream = new System.IO.MemoryStream(uwr.downloadHandler.data, 0, uwr.downloadHandler.data.Length, true, true);
            }
        }
        return LoadedStream;
    }
}
#endregion
```
<!--
![image](https://media.giphy.com/media/QKZfbgNK9oFkQ/giphy.gif){: .align-center}

https://speakerdeck.com/torisoup/unityniokerushe-ji-patan?slide=65
https://qiita.com/dwl/items/9b9f51e404a8682c553b
https://qiita.com/RYA234/items/ba73e6c37f1c39b1aeba

## ì‚¬ì´íŠ¸ 2
- [í•˜ë‚˜ì¹˜ë£¨ì˜ ë‚´ ë…¸íŠ¸](https://www.hanachiru-blog.com/search?q=Unitask){:target="_blank"} **ë§í¬ì— ì ‘ì†** <br> 

ğŸ“Œ **ë¸”ë¡œê·¸** <br>
**ì„¤ëª…** : ì¼ë³¸ì–´ ë¸”ë¡œê·¸<br>
**ë‚´ìš©** : C#, Unity, Shader, UniRx<br>
{: .notice--info}

## ì‚¬ì´íŠ¸ 3
- [UniRx ì•ˆí‹° íŒ¨í„´ ì»¬ë ‰ì…˜](https://qiita.com/toRisouP/items/91b7860af5e3eab037fc){:target="_blank"} **ë§í¬ì— ì ‘ì†** <br>

ğŸ“Œ **ë¸”ë¡œê·¸** <br>
**ì„¤ëª…** : ì¼ë³¸ì–´ ë¸”ë¡œê·¸<br>
**ë‚´ìš©** : Qiita ì‚¬ì´íŠ¸ ë¸”ë¡œê·¸<br>
{: .notice--info}




ğŸ“Œ **ë¸”ë¡œê·¸** <br>
**ì„¤ëª…** : ì¼ë³¸ì–´ ë¸”ë¡œê·¸<br>
**ë‚´ìš©** : C#, Unity, Shader, UniRx<br>
{: .notice--info}

ğŸ”” **í¬ìŠ¤íŒ… ê³µì§€** <br><br>
í˜„ì¬ ì‘ì„±í•œ í¬ìŠ¤íŒ…ì€ **ê¹ƒ ë¸”ë¡œê·¸ ì‹œì‘ ì„¸íŒ…**ê³¼ ê´€ë ¨ëœ ë‚´ìš©ì…ë‹ˆë‹¤.<br>
minimal-mistakes í…Œë§ˆì˜ ì»¤ìŠ¤í„°ë§ˆì´ì§• ë° í¬ìŠ¤íŒ…ì— ê´€í•´ì„œë„ ì§„í–‰í•  ì˜ˆì •ì´ë‹ˆ, 
**Github_Blog ì¹´í…Œê³ ë¦¬**ë¥¼ í´ë¦­í•˜ì…”ì„œ í™•ì¸í•´ë³´ì„¸ìš”!<br>
{: .notice--success}    //ë…¹ìƒ‰
{: .notice--primary}    //íšŒìƒ‰
{: .notice--info}       //íŒŒë‘
{: .notice--warning}    //ë…¸ë‘
{: .notice--danger}     //ë¹¨ê°•
-->